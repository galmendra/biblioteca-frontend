import{a as I}from"./chunk-WKR6BCLY.js";import{a as $,b as ee,c as te}from"./chunk-TRGXJDRA.js";import{a as Y,c as K,d as Q}from"./chunk-DFTAQJWK.js";import"./chunk-BI2JVPFO.js";import{C as J,F as X,G as Z,b as R,d as m,f as q,g as k,j as w,l as O,m as P,n as T,p as B,q as D,r as L,s as A,t as G,v as j,w as V,x as z,y as H}from"./chunk-XGSNQAZ3.js";import{K as U,L as W}from"./chunk-YOF6ZWVV.js";import{f as y,g as N}from"./chunk-72KRNO7Q.js";import{$ as u,Fb as x,Gc as b,Kc as F,Pa as a,Vb as r,Xb as v,eb as S,ib as p,tb as o,ub as t,vb as e,wb as g}from"./chunk-PS7QTO7M.js";function re(i,l){i&1&&(t(0,"mat-error"),r(1," El nombre es requerido "),e())}function ie(i,l){i&1&&(t(0,"mat-error"),r(1," El apellido es requerido "),e())}function ne(i,l){i&1&&(t(0,"mat-error"),r(1," El email es requerido "),e())}function ae(i,l){i&1&&(t(0,"mat-error"),r(1," Email inv\xE1lido "),e())}function oe(i,l){i&1&&(t(0,"mat-error"),r(1," La contrase\xF1a es requerida "),e())}function me(i,l){i&1&&(t(0,"mat-error"),r(1," M\xEDnimo 6 caracteres "),e())}function le(i,l){i&1&&(t(0,"mat-error"),r(1," El rol es requerido "),e())}var Re=(()=>{class i{fb=u(T);authService=u(I);router=u(y);snackBar=u(X);loading=!1;registerForm=this.fb.group({firstName:["",m.required],lastName:["",m.required],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]],role:["student",m.required]});onSubmit(){this.registerForm.valid&&(this.loading=!0,this.authService.register(this.registerForm.value).subscribe({next:d=>{this.loading=!1,d.success&&(this.snackBar.open(d.message,"Cerrar",{duration:3e3}),this.router.navigate(["/books"]))},error:d=>{this.loading=!1;let s=d.error?.message||"Error al registrarse";this.snackBar.open(s,"Cerrar",{duration:3e3})}}))}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=S({type:i,selectors:[["app-register"]],decls:47,vars:10,consts:[[1,"register-container"],[1,"register-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","firstName","placeholder","Juan"],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","P\xE9rez"],["matInput","","type","email","formControlName","email","placeholder","usuario@ejemplo.com"],["matInput","","type","password","formControlName","password","placeholder","********"],["formControlName","role"],["value","student"],["value","admin"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"login-link"],["routerLink","/auth/login"]],template:function(s,n){if(s&1&&(t(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),r(4,"Registro"),e(),t(5,"mat-card-subtitle"),r(6,"Crear nueva cuenta"),e()(),t(7,"mat-card-content")(8,"form",2),x("ngSubmit",function(){return n.onSubmit()}),t(9,"mat-form-field",3)(10,"mat-label"),r(11,"Nombre"),e(),g(12,"input",4),p(13,re,2,0,"mat-error",5),e(),t(14,"mat-form-field",3)(15,"mat-label"),r(16,"Apellido"),e(),g(17,"input",6),p(18,ie,2,0,"mat-error",5),e(),t(19,"mat-form-field",3)(20,"mat-label"),r(21,"Email"),e(),g(22,"input",7),p(23,ne,2,0,"mat-error",5)(24,ae,2,0,"mat-error",5),e(),t(25,"mat-form-field",3)(26,"mat-label"),r(27,"Contrase\xF1a"),e(),g(28,"input",8),p(29,oe,2,0,"mat-error",5)(30,me,2,0,"mat-error",5),e(),t(31,"mat-form-field",3)(32,"mat-label"),r(33,"Rol"),e(),t(34,"mat-select",9)(35,"mat-option",10),r(36,"Estudiante"),e(),t(37,"mat-option",11),r(38,"Administrador"),e()(),p(39,le,2,0,"mat-error",5),e(),t(40,"button",12),r(41),e()(),t(42,"div",13)(43,"p"),r(44,"\xBFYa tienes cuenta? "),t(45,"a",14),r(46,"Inicia sesi\xF3n aqu\xED"),e()()()()()()),s&2){let c,f,_,C,E,M,h;a(8),o("formGroup",n.registerForm),a(5),o("ngIf",(c=n.registerForm.get("firstName"))==null?null:c.hasError("required")),a(5),o("ngIf",(f=n.registerForm.get("lastName"))==null?null:f.hasError("required")),a(5),o("ngIf",(_=n.registerForm.get("email"))==null?null:_.hasError("required")),a(),o("ngIf",(C=n.registerForm.get("email"))==null?null:C.hasError("email")),a(5),o("ngIf",(E=n.registerForm.get("password"))==null?null:E.hasError("required")),a(),o("ngIf",(M=n.registerForm.get("password"))==null?null:M.hasError("minlength")),a(9),o("ngIf",(h=n.registerForm.get("role"))==null?null:h.hasError("required")),a(),o("disabled",n.registerForm.invalid||n.loading),a(),v(" ",n.loading?"Registrando...":"Registrarse"," ")}},dependencies:[F,b,B,w,R,q,k,O,P,N,V,D,A,j,G,L,Y,J,z,H,Q,K,W,U,te,ee,$,Z],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.register-card[_ngcontent-%COMP%]{max-width:500px;width:100%}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}mat-card-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return i})();export{Re as RegisterComponent};
