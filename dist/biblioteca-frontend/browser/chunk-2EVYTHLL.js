import{a as E}from"./chunk-WKR6BCLY.js";import{a as A,c as z,d as H}from"./chunk-DFTAQJWK.js";import{C as V,F as Q,G as U,b as F,d as s,f as y,g as k,j as I,l as w,m as O,n as P,p as B,q as L,r as N,s as q,t as D,v as T,w as G,x as R,y as j}from"./chunk-XGSNQAZ3.js";import{K as J,L as K}from"./chunk-YOF6ZWVV.js";import{f as x,g as v}from"./chunk-72KRNO7Q.js";import{$ as d,Fb as _,Gc as S,Kc as b,Pa as o,Vb as i,Xb as h,eb as C,ib as u,tb as l,ub as e,vb as t,wb as c}from"./chunk-PS7QTO7M.js";function W(r,g){r&1&&(e(0,"mat-error"),i(1," El email es requerido "),t())}function X(r,g){r&1&&(e(0,"mat-error"),i(1," Email inv\xE1lido "),t())}function Y(r,g){r&1&&(e(0,"mat-error"),i(1," La contrase\xF1a es requerida "),t())}var Me=(()=>{class r{fb=d(P);authService=d(E);router=d(x);snackBar=d(Q);loading=!1;loginForm=this.fb.group({email:["",[s.required,s.email]],password:["",s.required]});onSubmit(){this.loginForm.valid&&(this.loading=!0,this.authService.login(this.loginForm.value).subscribe({next:a=>{this.loading=!1,a.success&&(this.snackBar.open(a.message,"Cerrar",{duration:3e3}),this.router.navigate(["/books"]))},error:a=>{this.loading=!1;let m=a.error?.message||"Error al iniciar sesi\xF3n";this.snackBar.open(m,"Cerrar",{duration:3e3})}}))}static \u0275fac=function(m){return new(m||r)};static \u0275cmp=C({type:r,selectors:[["app-login"]],decls:27,vars:6,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","usuario@ejemplo.com"],[4,"ngIf"],["matInput","","type","password","formControlName","password","placeholder","********"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[1,"register-link"],["routerLink","/auth/register"]],template:function(m,n){if(m&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Iniciar Sesi\xF3n"),t(),e(5,"mat-card-subtitle"),i(6,"Sistema de Biblioteca"),t()(),e(7,"mat-card-content")(8,"form",2),_("ngSubmit",function(){return n.onSubmit()}),e(9,"mat-form-field",3)(10,"mat-label"),i(11,"Email"),t(),c(12,"input",4),u(13,W,2,0,"mat-error",5)(14,X,2,0,"mat-error",5),t(),e(15,"mat-form-field",3)(16,"mat-label"),i(17,"Contrase\xF1a"),t(),c(18,"input",6),u(19,Y,2,0,"mat-error",5),t(),e(20,"button",7),i(21),t()(),e(22,"div",8)(23,"p"),i(24,"\xBFNo tienes cuenta? "),e(25,"a",9),i(26,"Reg\xEDstrate aqu\xED"),t()()()()()()),m&2){let p,f,M;o(8),l("formGroup",n.loginForm),o(5),l("ngIf",(p=n.loginForm.get("email"))==null?null:p.hasError("required")),o(),l("ngIf",(f=n.loginForm.get("email"))==null?null:f.hasError("email")),o(5),l("ngIf",(M=n.loginForm.get("password"))==null?null:M.hasError("required")),o(),l("disabled",n.loginForm.invalid||n.loading),o(),h(" ",n.loading?"Ingresando...":"Ingresar"," ")}},dependencies:[b,S,B,I,F,y,k,w,O,v,G,L,q,T,D,N,A,V,R,j,H,z,K,J,U],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{max-width:400px;width:100%}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}mat-card-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return r})();export{Me as LoginComponent};
