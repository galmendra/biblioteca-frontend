import{a as ot,b as it,c as nt}from"./chunk-Z67DRW2S.js";import{a as tt,b as et}from"./chunk-HOYRRN2X.js";import{a as L}from"./chunk-WKR6BCLY.js";import{a as rt}from"./chunk-GG4VRRQX.js";import{a as q,c as G,d as J}from"./chunk-DFTAQJWK.js";import{C as Y,F as X,G as Z,b as V,f as T,i as F,o as A,q as D,r as N,s as Q,t as z,u as W,v as j,w as R,x as $,z as H}from"./chunk-XGSNQAZ3.js";import{K,L as U}from"./chunk-YOF6ZWVV.js";import{f as I}from"./chunk-72KRNO7Q.js";import{$ as g,$b as S,Db as k,Fb as f,Fc as y,Gc as O,Hb as m,Kc as P,Pa as s,Rb as M,Tb as v,Vb as i,Wb as C,Xb as x,_b as B,ac as E,ea as l,eb as h,fa as d,gc as w,ib as u,tb as p,ub as o,vb as e}from"./chunk-PS7QTO7M.js";function st(n,_){if(n&1){let t=k();o(0,"button",9),f("click",function(){l(t);let a=m();return d(a.createBook())}),o(1,"mat-icon"),i(2,"add"),e(),i(3," Nuevo Libro "),e()}}function ct(n,_){if(n&1){let t=k();o(0,"mat-card-actions")(1,"button",15),f("click",function(){l(t);let a=m().$implicit,c=m(2);return d(c.editBook(a))}),o(2,"mat-icon"),i(3,"edit"),e(),i(4," Editar "),e(),o(5,"button",16),f("click",function(){l(t);let a=m().$implicit,c=m(2);return d(c.deleteBook(a))}),o(6,"mat-icon"),i(7,"delete"),e(),i(8," Eliminar "),e()()}}function mt(n,_){if(n&1&&(o(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title"),i(3),e(),o(4,"mat-card-subtitle"),i(5),e()(),o(6,"mat-card-content")(7,"p")(8,"strong"),i(9,"Categor\xEDa:"),e(),i(10),e(),o(11,"p")(12,"strong"),i(13,"Stock Total:"),e(),i(14),e(),o(15,"p")(16,"strong"),i(17,"Disponibles:"),e(),o(18,"span"),i(19),e()(),o(20,"mat-chip-set")(21,"mat-chip",13),i(22),e()()(),u(23,ct,9,0,"mat-card-actions",14),e()),n&2){let t=_.$implicit,r=m(2);s(3),C(t.title),s(2),C(t.author),s(5),x(" ",t.category),s(4),x(" ",t.stock),s(4),v("text-success",(t.available||0)>0)("text-danger",(t.available||0)===0),s(),x(" ",t.available||t.stock," "),s(2),p("color",(t.available||t.stock)>0?"primary":"warn")("highlighted",!0),s(),x(" ",(t.available||t.stock)>0?"Disponible":"No disponible"," "),s(),p("ngIf",r.isAdmin)}}function lt(n,_){if(n&1&&(o(0,"div",10),u(1,mt,24,13,"mat-card",11),e()),n&2){let t=m();s(),p("ngForOf",t.books)}}function dt(n,_){n&1&&(o(0,"div",17)(1,"mat-icon"),i(2,"menu_book"),e(),o(3,"p"),i(4,"No se encontraron libros"),e()())}var Ft=(()=>{class n{booksService=g(rt);authService=g(L);router=g(I);snackBar=g(X);books=[];searchQuery="";get isAdmin(){return this.authService.isAdmin}ngOnInit(){this.loadBooks()}loadBooks(){this.booksService.getBooks(this.searchQuery).subscribe({next:t=>{t.success&&t.books&&(this.books=t.books)},error:t=>{this.snackBar.open("Error al cargar libros","Cerrar",{duration:3e3})}})}onSearch(){this.loadBooks()}createBook(){this.router.navigate(["/books/new"])}editBook(t){this.router.navigate(["/books/edit",t._id])}deleteBook(t){confirm(`\xBFEst\xE1s seguro de eliminar el libro "${t.title}"?`)&&this.booksService.deleteBook(t._id).subscribe({next:r=>{r.success&&(this.snackBar.open(r.message||"Libro eliminado","Cerrar",{duration:3e3}),this.loadBooks())},error:r=>{let a=r.error?.message||"Error al eliminar libro";this.snackBar.open(a,"Cerrar",{duration:3e3})}})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=h({type:n,selectors:[["app-books-list"]],decls:15,vars:4,consts:[["noBooks",""],[1,"books-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"search-bar"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Buscar por t\xEDtulo...",3,"ngModelChange","ngModel"],["matSuffix",""],["class","books-grid",4,"ngIf","ngIfElse"],["mat-raised-button","","color","primary",3,"click"],[1,"books-grid"],["class","book-card",4,"ngFor","ngForOf"],[1,"book-card"],[3,"color","highlighted"],[4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],[1,"no-books"]],template:function(r,a){if(r&1){let c=k();o(0,"div",1)(1,"div",2)(2,"h1"),i(3,"Cat\xE1logo de Libros"),e(),u(4,st,4,0,"button",3),e(),o(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),i(8,"Buscar libros"),e(),o(9,"input",6),E("ngModelChange",function(b){return l(c),S(a.searchQuery,b)||(a.searchQuery=b),d(b)}),f("ngModelChange",function(){return l(c),d(a.onSearch())}),e(),o(10,"mat-icon",7),i(11,"search"),e()()(),u(12,lt,2,1,"div",8)(13,dt,5,0,"ng-template",null,0,w),e()}if(r&2){let c=M(14);s(4),p("ngIf",a.isAdmin),s(5),B("ngModel",a.searchQuery),s(3),p("ngIf",a.books.length>0)("ngIfElse",c)}},dependencies:[P,y,O,A,V,T,F,R,D,W,Q,j,z,N,U,K,et,tt,q,Y,$,H,J,G,Z,nt,ot,it],styles:[".books-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}h1[_ngcontent-%COMP%]{margin:0;color:#333}.search-bar[_ngcontent-%COMP%]{margin-bottom:24px}.search-field[_ngcontent-%COMP%]{width:100%;max-width:500px}.books-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px}.book-card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s}.book-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #0003}mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600}mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}mat-chip-set[_ngcontent-%COMP%]{margin-top:12px}.text-success[_ngcontent-%COMP%]{color:#4caf50;font-weight:600}.text-danger[_ngcontent-%COMP%]{color:#f44336;font-weight:600}mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px;border-top:1px solid #e0e0e0}.no-books[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#999}.no-books[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.no-books[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}"]})}return n})();export{Ft as BooksListComponent};
